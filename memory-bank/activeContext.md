# アクティブコンテキスト

## 現在の作業の焦点

React Flowライブラリとツリー表示コンポーネントの実装が完了しました。Zustandを用いた状態管理システム、チャット機能の基本コンポーネント（MessageList、MessageInput、Sidebar）、および会話ツリー表示機能が実装され、フロントエンドの主要機能が動作可能な状態になっています。

## 最近の変更

*   **React Flowライブラリの追加**: `reactflow`パッケージをインストールし、ツリー表示機能を実装
*   **Zustandによる状態管理**: `frontend/src/store/conversationStore.ts`に会話ノードの管理システムを実装
*   **コンポーネントの実装**:
    *   `ConversationTree.tsx`: React Flowを使用したツリー表示コンポーネント
    *   `MessageList.tsx`: 会話履歴表示コンポーネント
    *   `MessageInput.tsx`: メッセージ入力コンポーネント（ダミーLLM応答機能付き）
    *   `Sidebar.tsx`: チャット履歴とナビゲーション用サイドバー
*   **メインページの統合**: `frontend/src/app/page.tsx`を更新し、全コンポーネントを統合
*   **TypeScript/ESLintエラーの修正**: ビルドエラーを解決し、プロダクションビルドが成功

## 次のステップ

1.  設定モーダルの実装（LLMプロバイダー設定用）
2.  バックエンドAPIの実装（FastAPI + PostgreSQL）
3.  実際のLLM統合（現在はダミーレスポンス）
4.  WebSocket/SSE通信の実装
5.  チャット履歴の永続化

## アクティブな決定と考慮事項

*   **状態管理の選択**: Zustandを採用し、会話ノードの階層構造を効率的に管理
*   **ツリー表示の実装**: React Flowを使用してインタラクティブな会話ツリーを実現
*   **ダミーLLM機能**: 実際のLLM統合前に、フロントエンドの動作確認が可能
*   **TypeScript型安全性**: 厳密な型定義により、開発時のエラーを防止

## 重要なパターンと好み

*   **コンポーネント分離**: 各機能を独立したコンポーネントに分離し、再利用性と保守性を向上
*   **状態の一元管理**: Zustandストアで会話状態を一元管理し、コンポーネント間の連携を簡素化
*   **レスポンシブデザイン**: Tailwind CSSを活用した柔軟なレイアウト設計

## 学習とプロジェクトの洞察

*   **会話ブランチの実装**: parent_idによる階層構造とZustandの組み合わせで、Gitライクなブランチ機能を実現
*   **React Flowの活用**: カスタムノードコンポーネントにより、会話ノードの視覚的表現とインタラクション機能を実装
*   **開発効率**: TypeScriptとESLintの組み合わせにより、開発時の品質保証を強化
*   **ビルド最適化**: Next.js 15のTurbopackにより、高速な開発体験を実現
