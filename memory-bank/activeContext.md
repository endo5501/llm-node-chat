# アクティブコンテキスト

## 現在の作業の焦点

設定表示ウィンドウの実装が完了しました。フロントエンドの主要機能（チャット機能、ツリー表示、設定管理）がすべて実装され、LLMプロバイダーの設定とアクティブプロバイダーの選択が可能になりました。次の段階はバックエンドAPIの実装です。

## 最近の変更

*   **設定ストアの実装**: `frontend/src/store/settingsStore.ts`にLLMプロバイダー管理システムを実装
*   **設定モーダルの実装**: `frontend/src/components/SettingsModal.tsx`による包括的な設定UI
*   **プロバイダー統合**: OpenAI、Azure、Gemini、Claude、Ollamaの各プロバイダーを統合し、モデル名編集可能に
*   **ラジオボタン選択**: アクティブプロバイダーを一つのみ選択可能なUI実装
*   **バージョン管理**: localStorageのバージョン管理機能でデータ移行問題を解決
*   **Sidebarとの連携**: 設定ボタンから設定モーダルを開く機能を実装

## 次のステップ

1.  バックエンドAPIの実装（FastAPI + PostgreSQL）
2.  実際のLLM統合（現在はダミーレスポンス）
3.  WebSocket/SSE通信の実装
4.  チャット履歴の永続化
5.  会話ブランチロジックの完全実装

## アクティブな決定と考慮事項

*   **設定の永続化**: Zustand persistミドルウェアとバージョン管理でlocalStorageを活用
*   **プロバイダー統合**: 複数のモデルを持つプロバイダーを統合し、モデル名で区別する設計
*   **UI/UX設計**: ラジオボタンによる単一選択でユーザビリティを向上
*   **型安全性**: TypeScript厳密モードでランタイムエラーを防止

## 重要なパターンと好み

*   **設定管理の分離**: 会話状態と設定状態を別々のストアで管理
*   **モーダル設計**: オーバーレイ形式の設定画面で非破壊的な設定変更
*   **バージョン管理**: データ構造変更時の自動マイグレーション機能
*   **プロバイダー抽象化**: 各LLMプロバイダーの差異を統一インターフェースで吸収

## 学習とプロジェクトの洞察

*   **localStorage問題の解決**: バージョン管理によるデータ移行で開発時の問題を解決
*   **設定UI設計**: 複雑な設定項目を直感的なUIで表現する手法を確立
*   **状態管理パターン**: Zustandの複数ストア活用で関心の分離を実現
*   **TypeScript活用**: 厳密な型定義でコンパイル時エラー検出を強化
